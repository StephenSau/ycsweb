define(["jquery"],function(t){function e(e){this.prev=null,this.next=null,this.text=null,this.frontE=null,this.backE=null,this.span=null,this.num=[],this.selectObj=null,this.anchorPoint=e.anchorPoint||"",this.data=e.data,this.invoke=e.invoke,this.sizes=e.sizes||[],this.pages=1*e.pages,this.eachAmount=e.amount,this.currentPage=e.currentPage,this.position=t(e.position),this.createPager()}return e.prototype={pagerClick:function(e){var s=t(e).attr("gotoPage");this.currentPage!=s&&this.pagerChange(s)},pagerSelectChange:function(){this.pagerChange(1)},pagerKeyup:function(t){"13"==t.keyCode&&this.pagerSubmit()},pagerSubmit:function(){var t=this.text.val();/^\d+$/.test(t)&&1*t>0&&1*t<=1*this.pages&&1*t!==this.currentPage?this.pagerChange(t):this.text.val("").focus()},pagerConstruct:function(e){var s=0,a=this,i=this.span,n=this.num,o=this.currentPage,h=this.pages;if(i.empty(),o=void 0!==e?e:1*o,this.prev=t("<a "+(this.anchorPoint?'href="#'+this.anchorPoint+'"':'href="javascript:;"')+' class="p-prev-btn'+(1==o?" p-disabled":"")+'"  gotoPage="'+(1>o-1?1:o-1)+'">&lt;上一页</a>').appendTo(i),9>=h)for(s=1;h>=s;s+=1)n[s-1]=t("<a "+(this.anchorPoint?'href="#'+this.anchorPoint+'"':'href="javascript:;"')+' class="p-num'+(s==o?" p-selected":"")+'" gotoPage="'+s+'">'+s+"</a>").appendTo(i);else if(h>9){var p=0;for(s=1;h>=s;s+=1)3==s?(this.frontE=t('<span class="p-ellipsis">...</span>').appendTo(i),6>o&&this.frontE.hide()):s==h-1&&(this.backE=t('<span class="p-ellipsis">...</span>').appendTo(i),o>h-5&&this.backE.hide()),s>2&&h-1>s&&((o-2>s||s>o+2)&&o>=5&&h-4>=o||5>o&&s>7||o>h-4&&h-6>s)||(n[p]=t("<a "+(this.anchorPoint?'href="#'+this.anchorPoint+'"':'href="javascript:;"')+' class="p-num'+(s==o?" p-selected":"")+'" gotoPage="'+s+'">'+s+"</a>").appendTo(i),p++)}this.next=t('<a class="p-next-btn '+(o==h?"p-disabled":"")+'" gotoPage="'+(o+1>h?h:o+1)+'">下一页&gt;</a>').appendTo(i),i.delegate("a","click",function(){a.pagerClick(this)})},createPager:function(){var t={};for(var e in this.data)t[e]=this.data[e];t.func=function(){arguments[0].pagerInit.call(arguments[0],arguments[3])},this.invoke(t)},pagerInit:function(e){var s=this,a=[],i=null;if(t(this.position).empty(),!(1>=1*e)){if(i=t('<p class="paginate"></p>'),this.pages=e,0!==this.sizes.length){for(var n=t('<span class="pager_sizes">每页显示：</span>').appendTo(i),o=t('<select style="width:64px; z-index:800"></select>').appendTo(n),h=0,p=this.sizes.length;p>h;h++)a.push('<option value="'+this.sizes[h]+'">'+this.sizes[h]+"</option>");t(a.join("")).appendTo(o)}this.span=t("<span></span>"),this.pagerConstruct(),this.span.appendTo(i),i.appendTo(this.position),0!==this.sizes.length&&o.val(this.eachAmount).change(function(){s.pagerSelectChange()}),this.selectObj=o}},pagerChange:function(t){var e={};for(var s in this.data)e[s]=this.data[s];e.pageNumber=t,e.pageSize=this.eachAmount,e.func=function(){arguments[0].pagerRebuild.call(arguments[0],arguments[3],arguments[2])},this.invoke(e)},pagerRebuild:function(t,e){var s=0,a=0,i=this.num,n=this.pages,o=this.frontE,h=this.backE,p=this.prev,r=this.next;for(t!==this.pages&&(this.pages=t,this.pagerConstruct(1)),a=i.length,s=0;a>s;s+=1)if(i[s].hasClass("p-selected")){i[s].removeClass("p-selected");break}if(9>=n)for(s=n;s--;)s+1!=e||i[s].addClass("p-selected");else if(n>9)if(a=i.length,e>5&&n-4>e){for(s=a;s--;)s>=2&&a-3>=s&&(4==s&&i[s].addClass("p-selected"),i[s].attr("gotoPage",parseInt(e,10)+(s-4)),i[s].text(parseInt(e,10)+(s-4)));o.show(),h.show()}else if(5>=e){for(s=a-2;s--;)i[s].attr("gotoPage",s+1),i[s].text(s+1),s+1==e&&i[s].addClass("p-selected");o.hide(),h.show()}else if(e>=n-4){for(s=2;a>s;s++)i[s].attr("gotoPage",parseInt(n,10)-(a-(s+1))),i[s].text(parseInt(n,10)-(a-(s+1))),e==parseInt(n,10)-(a-(s+1))&&i[s].addClass("p-selected");o.show(),h.hide()}this.currentPage=e,1==e?(p.addClass("p-disabled"),p.attr("gotoPage",1)):(p.removeClass("p-disabled"),p.attr("gotoPage",parseInt(e,10)-1)),e==n?(r.addClass("p-disabled"),r.attr("gotoPage",n)):(r.removeClass("p-disabled"),r.attr("gotoPage",parseInt(e,10)+1))}},e});